layui.use(["layer","element","jquery"],()=>{const layer=layui.layer,element=layui.element,$=layui.jquery,changeProgressStatus=n=>{let ele=$('[fiy-id="pc-'+n+'"]'),par=ele.parent(),ele_show=$('[fiy-id="pc-'+n+'-2"]');ele.removeClass("layui-icon-loading"),ele_show.addClass("layui-anim layui-anim-upbit"),ele_show.removeClass("layui-hide"),par.removeClass("layui-bg-blue"),1==par.attr("fir-status")?par.addClass("layui-bg-green"):par.addClass("layui-bg-red")},Request=(url,data="",type="get")=>{$.ajax({url:url,type:type,data:data,dataType:"json",async:!0,success:res=>{1==res.code?layer.open({content:res.msg,yes:(index,layero)=>{layer.close(index),location.reload()}}):layer.open(res.msg)}})},progress_check=(n=0)=>{element.progress("progress-check","0%");let progress=setInterval(()=>{if(100!=n)70==n?changeProgressStatus(2):30==n&&changeProgressStatus(1),n+=5,element.progress("progress-check",n+"%");else{changeProgressStatus(3),clearInterval(progress);var timeout=setTimeout(function(){let tip=$(".tip");tip.html(tip.attr("fiy-msg")),clearTimeout(timeout)},500)}},100)};$(document).on("click","[fiy-class=repair]",function(){Request($(this).attr("fiy-link"))}),$(document).on("click","[fiy-class=goto]",function(){location.href=$(this).attr("fiy-link")}),progress_check()});